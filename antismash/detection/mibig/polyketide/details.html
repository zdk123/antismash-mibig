<div class="details">
        <div class="heading">
           <span>Polyketide-specific information</span>
        </div>
        <div>
            <table border="1" style="width: 100%; margin-bottom: .4em;">
                <tbody>
                    <tr>
                        <td width="25%">
                            <strong>Subclass</strong>
                        </td>
                        <td>
                            {{"/".join(pk.get("subclasses", []))}}
                        </td>
                    </tr>
                    {% if "starter_unit" in pk %}
                    <tr>
                        <td width="25%">
                            <strong>Starter unit</strong>
                        </td>
                        <td>
                        {{pk["starter_unit"]}}
                        </td>
                    </tr>
                    {% endif %}
                    {% if "ketide_length" in pk %}
                    <tr>
                        <td width="25%">
                            <strong>Ketide length</strong>
                        </td>
                        <td>
                            {{pk["ketide_length"]}}
                        </td>
                    </tr>
                    {% endif %}
                    <tr>
                        <td width="25%">
                            <strong>Cyclic?</strong>
                        </td>
                        <td>
                            {{"yes" if pk.get("cyclic", False) else "no"}}
                        </td>
                    </tr>
                    {% if pk.get("release_type", [])|length > 0 %}
                    <tr>
                        <td width="25%">
                            <strong>Release type</strong>
                        </td>
                        <td>
                            <ul style="padding: 0; margin: 0; list-style: none;">
                                {% for rel in pk["release_type"] %}
                                <li>
                                    {{rel}}
                                </li>
                                {% endfor %}
                            </ul>
                        </td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
        {% if pk.get("synthases", [])|length > 0 %}
        <div class="heading">
           <span>Polyketide-synthases</span>
        </div>
        <div>
            <table border="1" style="width: 100%;">
                <thead>
                    <tr>
                        <th style="width: 9em; text-align:center;">Genes</th>
                        <th style="min-width: 20em; text-align:center;">Properties</th>
                        <th style="min-width: 20em; text-align:center;">Modules</th>
                    </tr>
                </thead>
                <tbody>
                {% for pks in pk["synthases"] %}
                {% for module in pks.get("modules", [None]) %}
                    <tr>                        
                        {% if loop.index == 1 %}
                        <td rowspan="{{pks.get('modules', [None])|length}}" style="text-align:center; vertical-align: middle;">
                            {{"<br />+<br />".join(pks["genes"])|safe}}
                        </td>
                        <td rowspan="{{pks.get('modules', [None])|length}}" style="text-align:left; vertical-align: text-top;">
                            <strong>Synthase subclass:</strong> {{"/".join(pks.get('subclass', []))}}<br />
                            {% if "trans_at" in pks %}
                            <strong>Trans-acyltansferases:</strong> {{", ".join(pks["trans_at"].get("genes", []))}}<br />
                            {% endif %}
                            {% if pks.get("thioesterases", [])|length > 0 %}
                            <strong>Thioesterases:</strong><br />
                            <ul style="padding: 0; padding-left: 1em; margin: 0;">
                                {% for te in pks["thioesterases"] %}
                                <li>
                                    {{te["gene"]}} ({{te["thioesterase_type"]}})
                                </li>
                                {% endfor %}
                            </ul>
                            {% endif %}
                            {% if "pufa_modification_domains" in pks %}
                            <strong>PUFA modification domains:</strong> {{", ".join(pks["pufa_modification_domains"])}}<br />
                            {% endif %}
                            {% if "iterative" in pks %}
                            {% set iterative = pks["iterative"] %}
                            {% if "genes" in iterative %}
                            <strong>Iterative PKS genes:</strong> {{", ".join(iterative.get("genes", []))}}<br />
                            {% endif %}
                            <strong>Iterative PKS type:</strong> {{iterative["subtype"]}}, {{iterative["cyclization_type"]}}<br />
                            <strong>Iteration counts:</strong> {{iterative["nr_iterations"]}}<br />
                            {% if "evidence" in iterative %}
                            <ul style="margin: 0;">
                                {% for evidence in iterative.get("evidence", []) %}
                                <li>
                                    {{evidence}}
                                </li>
                                {% endfor %}
                            </ul>
                            {% endif %}
                            {% endif %}
                        </td>
                        {% endif %}
                        <td style="min-width: 20em; text-align:left;">
                            {% if module != None %}
                            <div style="margin-bottom: 1em;">
                                <strong>
                                    Module {{module.get("module_number", "?")}}
                                    {% if module.get("comments", "")|length > 0 %}
                                    <div class="help-container" style="float: none;">
                                        <div class="help-icon" data-id="mibig-help-pk-pks-module-{{loop.index}}" style="float: none; background-color: #006CA2;"></div>
                                        <span class="help-tooltip" id="mibig-help-pk-pks-module-{{loop.index}}">{{module["comments"]}}</span>
                                    </div>
                                    {% endif %}
                                </strong><br />
                                {% if "at_specificities" in module %}
                                Specificity: {{"/".join(module["at_specificities"])}}<br />
                                Evidence for specificity: {{module.get("evidence", "?")}}<br />
                                {% endif %}
                                {% if module.get("genes", [])|length > 0 %}
                                Genes: {{", ".join(module["genes"])}}<br />
                                {% endif %}
                                {% if module.get("domains", [])|length > 0 %}
                                Core domains: {{", ".join(module["domains"])}}<br />
                                {% endif %}
                                {% if module.get("pks_mod_doms", [])|length > 0 %}
                                Scaffold-modifying domains: {{", ".join(module["pks_mod_doms"])}}<br />
                                {% endif %}
                                {% if "kr_stereochem" in module %}
                                KR-domain stereochemistry: {{module["kr_stereochem"]}}<br />
                                {% endif %}
                                {% if "non_canonical" in module %}
                                Non-canonical activity: <br />
                                <ul style="margin: 0;">
                                    {% if module["non_canonical"].get("iterated", False) %}
                                    <li>Iterated</li>
                                    {% endif %}
                                    {% if module["non_canonical"].get("non_elongating", False) %}
                                    <li>Non-elongating</li>
                                    {% endif %}
                                    {% if module["non_canonical"].get("skipped", False) %}
                                    <li>Skipped</li>
                                    {% endif %}
                                </ul>
                                Evidence for non-canonical activity: <br />
                                <ul style="margin: 0;">
                                    {% for evidence in module["non_canonical"].get("evidence", []) %}
                                    <li>
                                        {{evidence}}
                                    </li>
                                    {% endfor %}
                                </ul>
                                {% endif %}
                            </div>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
                {% endfor %}
                </tbody>
            </table>
        </div>
        {% endif %}
    </div>